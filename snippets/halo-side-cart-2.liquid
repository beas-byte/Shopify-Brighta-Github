{% comment %} Wholesale_Club_Product_Prices Start {% endcomment %}
{% assign base_product = product %}
{% assign base_variant = product.selected_or_first_available_variant %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCProduct_Price = base_product.price %}
  {% assign WCProduct_ComparePrice = base_product.compare_at_price %}
  {% assign WCProduct_PriceMin = base_product.price_min %}
  {% assign WCProduct_ComparePriceMin = base_product.compare_at_price_min %}
  {% assign WCProduct_PriceMax = base_product.price_max %}
  {% assign WCProduct_ComparePriceMax = base_product.compare_at_price_max %}
  {% assign WCProduct_VariantPrice = base_variant.price %}
  {% assign WCProduct_VariantComparePrice = base_variant.compare_at_price %}
{% else %}   
  {% assign WCProduct_Price = saw_variant_price %}
  {% assign WCProduct_PriceMin = base_product.price_min | times: saw_discount %}
  {% assign WCProduct_PriceMax = base_product.price_max | times: saw_discount %}
  {% assign WCProduct_ComparePrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCProduct_ComparePriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCProduct_ComparePriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCProduct_ComparePriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCProduct_ComparePriceMax = base_product.price_max %}{% endif %}
  {% assign WCProduct_VariantPrice = saw_variant_price %}
  {% assign WCProduct_VariantComparePrice = saw_variant_compare_at_price %}
{% endif %}
{% comment %} Wholesale_Club_Product_Prices End {% endcomment %}

{%- liquid
    assign product = all_products[settings.cart_product_gift]
    assign product_downcase = product | downcase
    assign id = product.selected_or_first_available_variant.id | minus: 0
    
    assign check = false
    for item in cart.items
      if item.id == id
        assign check = true
      endif
    endfor
-%}
{% unless cart == empty %}

 {%- liquid
            assign cartDiscounts = 'template ' | split: ' '
            if cart.cart_level_discount_applications.size > 0
                assign cartDiscounts = cart.cart_level_discount_applications
            endif
        -%}
        <div {% if cart.cart_level_discount_applications.size == 0 %} style="display: none"{% endif %} data-cart-discount-wrapper>
            <div class="order-discount-card-wrapper" data-cart-discount>
                {%- for discount_application in cartDiscounts limit: 1 -%}
                    <span class="order-discount order-discount--title order-discount--cart">
                        <span data-cart-discount-title>{{- discount_application.title -}}</span>
                    </span>
                    <span class="order-discount order-discount--cart order-discount--cart-total">
                      -<span data-cart-discount-amount>{{ discount_application.total_allocated_amount | money }}</span>
                    </span>
                {%- endfor -%}
            </div>
        </div>
  
    <div class="previewCart">
    	{%- for item in cart.items -%}
{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}


                                  
                                    <div class="cart-item fu-bch" data-item-row {% if item.product.variants.size != 0 %}{% unless item.variant.title contains 'Default' %}data-cart-edit-productItem{% endunless %}{% endif %} data-line="{{ item.key }}">
                                        <div class="cart-item-block cart-item-info">
                                            <div class="cart-item-wrapper">
                                               
                                                    <a href="{{ item.url }}" class="previewCartItem-image">
                        <img srcset="{{ item.image | img_url: '110x' }}" src="{{ item.image | img_url: '110x' }}" alt="{{ item.title | escape }}" sizes="auto" loading="lazy">
                    </a>
                                               
                                                <div class="cart-item-block-right">
                                                    {%- liquid
                                                        assign thisHandle = item.product.handle
                                                        assign thisProduct = all_products[thisHandle]
                                                      -%}
                                                      <script type="text/javascript">
                                                        window.cart_selling_array_{{ thisProduct.id }} = {
                                                            {% for variantProduct in thisProduct.variants %}
                                                                '{{ variantProduct.id }}': '{{ variantProduct.inventory_policy }}',
                                                            {%endfor%}
                                                        };
                                                      </script>
                                   {%- if section.settings.show_vendor -%}
                                                        <p class="cart-item-vendor">{{ item.product.vendor }}</p>
                                                    {%- endif -%}
                                  
                                                    <h4 class="previewCartItem-name link-underline">
                                                        <a href="{{ item.url }}" class="link link-underline">
                                                            <span class="text">{{ item.product.title | escape }}</span>
                                                        </a>
                                                    </h4>
                                                    {%- if item.product.variants.size != 0 -%}
                                                        {%- unless item.variant.title contains 'Default' -%}
                                                            <div class="cart-item-option">
                                                                <span class="cart-item-variant">{{ item.variant.title }}</span>
                                                                <a href="javascript:void(0);" class="cart-item-edit" data-open-edit-cart data-edit-cart-url="{{ item.url }}&view=ajax_edit_cart" data-edit-cart-id="{{ item.id }}" data-edit-cart-quantity="{{ item.quantity }}" data-line="{{ item.key }}" aria-label="{{ 'sections.cart.edit_title' | t: title: item.variant.title }}">
                                                                    {% render 'icon-edit' %}
                                                                </a>
                                                            </div>
                                                        {%- endunless -%}
                                                    {%- endif -%}
                                                    
                                                    {%- if item.properties.size != 0 -%}
                                                        <dl class="cart-item-properties definitionList">
                                                            {%- for property in item.properties -%}
                                                                {%- assign property_first_char = property.first | slice: 0 -%}
                                                                {%- if property.last != blank and property_first_char != '_' -%}
                                                                    <div class="product-option">
                                                                        <dt class="definitionList-key">{{ property.first }}:</dt>
                                                                        <dd class="definitionList-value">
                                                                            {%- if property.last contains '/uploads/' -%}
                                                                                <a href="{{ property.last }}" target="_blank">
                                                                                    {{ property.last | split: '/' | last }}
                                                                                </a>
                                                                            {%- else -%}
                                                                                {{ property.last }}
                                                                            {%- endif -%}
                                                                        </dd>
                                                                    </div>
                                                                {%- endif -%}
                                                            {%- endfor -%}
                                                        </dl>
                                                    {%- endif -%}
                                                    {%- if item.selling_plan_allocation != nil -%}
                                                        <p class="cart-item-allocation">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                                                    {%- endif -%}
                                                    {%- if item.discounts.size > 0 -%}
                                                        <ul class="cart-discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                                                            {%- for discount in item.discounts -%}
                                                                <li class="discounts__discount">
                                                                    {%- render 'icon-discount' -%}
                                                                    {{ discount.title }}
                                                                </li>
                                                            {%- endfor -%}
                                                        </ul>
                                                    {%- endif -%}
                                                    {% comment %} adding-block {% endcomment %}
                                                    <div class="cart-item-block cart-item-price small-screen-visible">
                                                        <div class="cart-item__price-wrapper">
                                                            {%- if WCItem_OriginalPrice != WCItem_FinalPrice -%}
                                                                <dl class="cart-item__discounted-prices">
                                                                    <dt class="visually-hidden">
                                                                        {{ 'products.product.price.regular_price' | t }}
                                                                    </dt>
                                                                    <dd>
                                                                        <s class="cart-item__old-price price price--end">
                                                                            {{ WCItem_OriginalPrice | money }}
                                                                        </s>
                                                                    </dd>
                                                                    <dt class="visually-hidden">
                                                                        {{ 'products.product.price.sale_price' | t }}
                                                                    </dt>
                                                                    <dd class="price price--end">
                                                                        {{ WCItem_FinalPrice | money }}
                                                                    </dd>
                                                                </dl>
                                                                {%- if item.variant.available and item.unit_price_measurement -%}
                                                                    <div class="unit-price caption">
                                                                        <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                                                                        {{ item.variant.unit_price | money }}
                                                                        <span aria-hidden="true">/</span>
                                                                        <span class="visually-hidden">&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span>
                                                                        {%- if item.variant.unit_price_measurement.reference_value != 1 -%}
                                                                            {{- item.variant.unit_price_measurement.reference_value -}}
                                                                        {%- endif -%}
                                                                        {{ item.variant.unit_price_measurement.reference_unit }}
                                                                    </div>
                                                                {%- endif -%}
                                                            {%- else -%}
                                                                <span class="price price--end">
                                                                    {{ WCItem_OriginalPrice | money }}
                                                                </span>
                                                            {%- endif -%}
                                                        </div>
                                                    </div>
                                                    <div class="cart-item-blocks small-screen-visible">
                                                        <div class="cart-item-blocks-left">
                                                            <div class="cart-item-block cart-item-quantity small-screen-visible">
                                                                <cart-update-quantity class="cart-item-qty">
                                                                    <label class="form-label hiddenLabels" for="upsell-update-{{ item.id }}">
                                                                        {{ 'products.product.quantity.label' | t }}
                                                                    </label>
                                                                    <a href="javascript:void(0)" data-minus-quantity-cart="" class="minus btn-quantity"></a>
                                                                    <input class="form-input quantity cart-item-qty-input" name="quantity" id="upsell-update-{{ item.id }}" data-qtt-id1="quantity{{ item.id }}" value="{{ item.quantity }}" type="number"{% if item.variant.inventory_management != null and item.variant.inventory_quantity > 0 %} data-inventory-quantity="{{ item.variant.inventory_quantity }}"{% endif %} data-cart-quantity data-cart-quantity-id="{{ item.id }}" data-line="{{ item.key }}" />
                                                                    <a href="javascript:void(0)" data-plus-quantity-cart="" class="plus btn-quantity"></a>
                                                                </cart-update-quantity>
                                                            </div>
                                                        </div>
                                                        <div class="cart-item-block cart-item-remove small-screen-visible">
                                                            <a class="cart-remove" href="javascript:void(0)" data-cart-remove data-cart-remove-id="{{ item.id }}" data-line="{{ item.key }}" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                                                {% render 'icon-close' %}
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                 
                                    </div>
                                {%- endfor -%}
                            </div>
                      
  </div>
                       
                    </div>
                    <div class="cart-content-item cart-total" data-cart-total>
                        <form action="{{ routes.cart_url }}" method="post" novalidate>
                            <ul class="cart-totals list-unstyled">
                                <div class="cart--totals-title">
                                    {{ 'general.cart.order_summary' | t }} 
                                </div>
                              
                               
                                {%- if show_coupon_code -%}
                                    <li class="cart-total cart-total-coupon">
                                        <div class="cart-total-label">
                                            <span class="text">{{ 'general.cart.coupon_code' | t }}</span>
                                        </div>
                                        <div class="cart-total-value" style="display: none;"></div>
                                        <div class="cart-coupon-code form-field discount-code-field"> 
                                            <label class="form-label hiddenLabels" for="cart-coupon-code">{{ 'general.cart.coupon_code' | t }}</label> 
                                            <input class="form-input" autocomplete="off" type="text" name="discount" id="cart-coupon-code" placeholder="{{'general.cart.enter_coupo_code' | t }}" /> 
                                            <p class="form-text">{{ 'general.cart.coupon_code_text' | t }}</p>
                                        </div>
                                    </li>
                                {%- endif -%}
                              <span style="display: block; text-align: right; font-size: initial !important;" class="saw-extra-note"></span>
                                <li class="cart-total cart-total-grandtotal">
                                    <div class="cart-total-label">
                                        <span class="text">{{ 'general.cart.total' | t }}</span>
                                    </div>
                                    <div class="cart-total-value">
                                        <span class="saw-cart-original-total"><span class="text">{{ cart.total_price | money }}</span></span><br><span class="saw-cart-total"></span>
                                    </div>
                                </li>
                            </ul>
                            <div class="cart-actions">
                                {%- if settings.show_global_checkbox -%}
                                    <div class="cart-checkbox global-checkbox">
                                        <input class="global-checkbox--input" type="checkbox" name="conditions" id="cart_conditions" data-target="#cart-checkout">
                                        <label class="global-checkbox--label form-label--checkbox" for="cart_conditions">
                                            {{ settings.global_checkbox_text }}
                                        </label>
                                        {%- if settings.global_checkbox_link_text != blank -%}
                                            <a href="javascript:void(0)" data-term-condition>
                                                {{ settings.global_checkbox_link_text | escape }}
                                            </a>
                                        {%- endif -%}
                                    </div>
                                {%- endif -%}
                                <div class="action-group">
                                    <button class="button button-1 button-checkout" {% if settings.show_global_checkbox %} disabled="disabled" {% endif %} id="cart-checkout" name="checkout" data-href="{{ routes.cart_url | split: '/cart' | first }}/checkout">
                                        {{ 'sections.cart.proceed_to_checkout' | t }}
                                    </button>
                                    {% if continue_button_action == "1" %}
                                        <a class="button button-2 button-continue"{% if custom_button_link == blank %} role="link" aria-disabled="true"{% else %} href="{{ custom_button_link }}"{% endif %} role="button">
                                            {{ 'general.continue_shopping' | t }}
                                        </a>
                                    {% else %}
                                        <a class="button button-2 button-continue" role="link" aria-disabled="true" href="{{ routes.cart_url }}" role="button" id="cart-previous-page-btn">
                                            {{ 'sections.cart.view_cart' | t }}
                                        </a>
                                    {% endif %}
                                </div> 
                            </div>
                        </form>
                    </div>
                </div>
            {%- else -%}
                <div class="cart-content-empty text-center">
                    <span class="cart-text">{{ 'sections.cart.empty' | t }}</span>
                    <div class="cart-actions">
                        {% if continue_button_action == "1" %}
                            <a class="button button-2 button-continue"{% if custom_button_link == blank %} role="link" aria-disabled="true"{% else %} href="{{ custom_button_link }}"{% endif %} role="button">
                                {{ 'general.continue_shopping' | t }}
                            </a>
                        {% else %}
                            <a class="button button-2 button-continue" href="{{ routes.cart_url }}" role="link" aria-disabled="true" role="button" id="cart-previous-page-btn">
                                {{ 'sections.cart.view_cart' | t }}
                            </a>
                        {% endif %}
                    </div>
                </div>
           
        </div>
    </div>
{% endunless%}

{% render 'wc_cart' %}

<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
